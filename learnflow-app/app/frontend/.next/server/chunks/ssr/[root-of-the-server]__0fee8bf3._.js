module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},58851,(a,b,c)=>{"use strict";b.exports=a.r(76458).vendored.contexts.HooksClientContext},47942,(a,b,c)=>{"use strict";b.exports=a.r(76458).vendored.contexts.ServerInsertedHtml},31143,55256,a=>{"use strict";let b={getUser:()=>null,setUser:a=>{},logout:()=>{},isAuthenticated:()=>!1,getToken:()=>null};async function c(a,d={}){let e=`http://localhost:8001${a}`,f=d.method||"GET",g={"Content-Type":"application/json",...d.headers},h=b.getToken();h&&(g.Authorization=`Bearer ${h}`);let i=await fetch(e,{method:f,headers:g,body:d.body?JSON.stringify(d.body):void 0});if(!i.ok){if(401===i.status)throw b.logout(),Error("Unauthorized");throw Error(`API error: ${i.statusText}`)}return i.json()}a.s(["auth",0,b],55256),a.s(["orderAPI",0,{getCart:()=>c("/cart"),addToCart:(a,b)=>c("/cart/items",{method:"POST",body:{productId:a,quantity:b}}),removeFromCart:a=>c(`/cart/items/${a}`,{method:"DELETE"}),checkout:a=>c("/checkout",{method:"POST",body:a}),getOrders:()=>c("/orders"),getOrder:a=>c(`/orders/${a}`)},"userAPI",0,{register:(a,b,d)=>c("/users/register",{method:"POST",body:{email:a,password:b,name:d}}),login:(a,b)=>c("/users/login",{method:"POST",body:{email:a,password:b}}),getProfile:()=>c("/users/me"),updateProfile:a=>c("/users/me",{method:"PUT",body:a})}],31143)},83657,a=>{"use strict";var b=a.i(73106),c=a.i(32635),d=a.i(67932),e=a.i(1453),f=a.i(31143),g=a.i(55256);function h(){let a=(0,d.useRouter)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null);return((0,c.useEffect)(()=>{(async()=>{if(!g.auth.isAuthenticated())return a.push("/auth/login");try{let a=g.auth.getToken(),b=await f.orderAPI.getOrders(a||"");i(b.data||b)}catch(a){console.error("Failed to fetch orders:",a)}finally{k(!1)}})()},[a]),j)?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-500",children:"Loading orders..."})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-12",children:[(0,b.jsx)("h1",{className:"text-4xl font-serif font-bold mb-8",children:"Order History"}),0===h.length?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"You haven't placed any orders yet"}),(0,b.jsx)(e.default,{href:"/products",className:"inline-block bg-pink-600 text-white px-6 py-3 rounded hover:bg-pink-700 transition",children:"Start Shopping"})]}):(0,b.jsx)("div",{className:"space-y-4",children:h.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,b.jsxs)("button",{onClick:()=>m(l===a.id?null:a.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition",children:[(0,b.jsxs)("div",{className:"text-left flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg",children:["Order #",a.id]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${(a=>{switch(a.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(a.status)}`,children:a.status.charAt(0).toUpperCase()+a.status.slice(1)}),(0,b.jsx)("span",{className:`text-sm font-semibold ${(a=>{switch(a.toLowerCase()){case"paid":return"text-green-600";case"pending":return"text-yellow-600";case"failed":return"text-red-600";default:return"text-gray-600"}})(a.payment_status)}`,children:a.payment_status.charAt(0).toUpperCase()+a.payment_status.slice(1)})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Date"}),(0,b.jsx)("p",{children:new Date(a.created_at).toLocaleDateString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Total"}),(0,b.jsxs)("p",{className:"font-semibold text-gray-900",children:["Rs."," ",parseFloat(String(a.total_amount)).toLocaleString()]})]})]})]}),(0,b.jsx)("div",{className:"text-2xl text-gray-400",children:l===a.id?"▼":"▶"})]}),l===a.id&&(0,b.jsxs)("div",{className:"border-t px-6 py-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold mb-3",children:"Items"}),(0,b.jsx)("div",{className:"space-y-2",children:a.items.map(a=>(0,b.jsxs)("div",{className:"flex justify-between text-sm py-2 border-b border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.product_name}),(0,b.jsxs)("p",{className:"text-gray-600",children:["Qty: ",a.quantity]})]}),(0,b.jsxs)("p",{className:"font-semibold",children:["Rs."," ",(parseFloat(String(a.price))*a.quantity).toLocaleString()]})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold mb-2",children:"Shipping Address"}),(0,b.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:a.shipping_address})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,b.jsxs)("span",{children:["Rs."," ",parseFloat(String(a.total_amount)).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,b.jsx)("span",{children:"Free"})]}),(0,b.jsxs)("div",{className:"flex justify-between font-semibold text-lg border-t pt-2",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{children:["Rs."," ",parseFloat(String(a.total_amount)).toLocaleString()]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(e.default,{href:"/products",className:"flex-1 text-center bg-pink-600 text-white py-2 rounded hover:bg-pink-700 transition",children:"Continue Shopping"}),"pending"===a.status.toLowerCase()&&(0,b.jsx)("button",{className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded hover:bg-gray-300 transition",children:"Cancel Order"})]})]})]},a.id))})]})})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0fee8bf3._.js.map