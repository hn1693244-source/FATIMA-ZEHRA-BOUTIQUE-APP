module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},58851,(a,b,c)=>{"use strict";b.exports=a.r(76458).vendored.contexts.HooksClientContext},47942,(a,b,c)=>{"use strict";b.exports=a.r(76458).vendored.contexts.ServerInsertedHtml},31143,55256,a=>{"use strict";let b={getUser:()=>null,setUser:a=>{},logout:()=>{},isAuthenticated:()=>!1,getToken:()=>null};async function c(a,d={}){let e=`http://localhost:8001${a}`,f=d.method||"GET",g={"Content-Type":"application/json",...d.headers},h=b.getToken();h&&(g.Authorization=`Bearer ${h}`);let i=await fetch(e,{method:f,headers:g,body:d.body?JSON.stringify(d.body):void 0});if(!i.ok){if(401===i.status)throw b.logout(),Error("Unauthorized");throw Error(`API error: ${i.statusText}`)}return i.json()}a.s(["auth",0,b],55256),a.s(["orderAPI",0,{getCart:()=>c("/cart"),addToCart:(a,b)=>c("/cart/items",{method:"POST",body:{productId:a,quantity:b}}),removeFromCart:a=>c(`/cart/items/${a}`,{method:"DELETE"}),checkout:a=>c("/checkout",{method:"POST",body:a}),getOrders:()=>c("/orders"),getOrder:a=>c(`/orders/${a}`)},"userAPI",0,{register:(a,b,d)=>c("/users/register",{method:"POST",body:{email:a,password:b,name:d}}),login:(a,b)=>c("/users/login",{method:"POST",body:{email:a,password:b}}),getProfile:()=>c("/users/me"),updateProfile:a=>c("/users/me",{method:"PUT",body:a})}],31143)},22968,a=>{"use strict";var b=a.i(73106),c=a.i(32635),d=a.i(67932),e=a.i(31143),f=a.i(55256);function g(){let a=(0,d.useRouter)(),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)({full_name:"",phone:"",address:""});(0,c.useEffect)(()=>{(async()=>{if(!f.auth.isAuthenticated())return a.push("/auth/login");try{let a=f.auth.getToken(),b=(await e.userAPI.getProfile(a||"")).data;h(b),r({full_name:b.full_name||"",phone:b.phone||"",address:b.address||""})}catch(a){console.error("Failed to fetch profile:",a)}finally{j(!1)}})()},[a]);let s=async a=>{a.preventDefault(),n(!0),p("");try{let a=f.auth.getToken(),b=(await e.userAPI.updateProfile(a||"",q)).data;h(b),f.auth.setUser(b),l(!1),p("✓ Profile updated successfully"),setTimeout(()=>p(""),3e3)}catch(a){p("✗ Failed to update profile")}finally{n(!1)}};return i?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-500",children:"Loading profile..."})}):g?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-12",children:[(0,b.jsx)("h1",{className:"text-4xl font-serif font-bold mb-8",children:"My Profile"}),o&&(0,b.jsx)("div",{className:`mb-6 p-4 rounded ${o.startsWith("✓")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:o}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-md p-8",children:k?(0,b.jsxs)("form",{onSubmit:s,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Email (Read-only)"}),(0,b.jsx)("input",{type:"email",value:g.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded bg-gray-50 text-gray-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Full Name"}),(0,b.jsx)("input",{type:"text",value:q.full_name,onChange:a=>r({...q,full_name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-600",placeholder:"Enter your full name"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Phone"}),(0,b.jsx)("input",{type:"tel",value:q.phone,onChange:a=>r({...q,phone:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-600",placeholder:"Enter your phone number"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Address"}),(0,b.jsx)("textarea",{value:q.address,onChange:a=>r({...q,address:a.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-600",placeholder:"Enter your address"})]}),(0,b.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,b.jsx)("button",{type:"submit",disabled:m,className:"flex-1 bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 disabled:bg-gray-300 transition",children:m?"Saving...":"Save Changes"}),(0,b.jsx)("button",{type:"button",onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-400 transition",children:"Cancel"})]})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Email"}),(0,b.jsx)("p",{className:"text-lg text-gray-900 bg-gray-50 p-3 rounded",children:g.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Full Name"}),(0,b.jsx)("p",{className:"text-lg text-gray-900",children:g.full_name||"Not provided"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Phone"}),(0,b.jsx)("p",{className:"text-lg text-gray-900",children:g.phone||"Not provided"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Address"}),(0,b.jsx)("p",{className:"text-lg text-gray-900 whitespace-pre-wrap",children:g.address||"Not provided"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Member Since"}),(0,b.jsx)("p",{className:"text-lg text-gray-900",children:new Date(g.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Account Status"}),(0,b.jsx)("p",{className:"text-lg text-gray-900",children:g.is_active?(0,b.jsx)("span",{className:"text-green-600 font-semibold",children:"✓ Active"}):(0,b.jsx)("span",{className:"text-red-600 font-semibold",children:"✗ Inactive"})})]}),(0,b.jsx)("button",{onClick:()=>l(!0),className:"w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 transition mt-8",children:"Edit Profile"})]})})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-500",children:"Failed to load profile"})})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d3f9b8c1._.js.map