(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33398,(e,t,s)=>{t.exports=e.r(8991)},51086,46313,e=>{"use strict";e.i(74374);let t={getUser:()=>{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("user");if(e&&t)try{return JSON.parse(t)}catch{}return null},setUser:e=>{localStorage.setItem("user",JSON.stringify(e)),e.token&&localStorage.setItem("auth_token",e.token)},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("auth_token")},isAuthenticated:()=>!!localStorage.getItem("auth_token"),getToken:()=>localStorage.getItem("auth_token")};async function s(e,r={}){let a=`http://localhost:8001${e}`,l=r.method||"GET",i={"Content-Type":"application/json",...r.headers},n=t.getToken();n&&(i.Authorization=`Bearer ${n}`);let o=await fetch(a,{method:l,headers:i,body:r.body?JSON.stringify(r.body):void 0});if(!o.ok){if(401===o.status)throw t.logout(),Error("Unauthorized");throw Error(`API error: ${o.statusText}`)}return o.json()}e.s(["auth",0,t],46313),e.s(["orderAPI",0,{getCart:()=>s("/cart"),addToCart:(e,t)=>s("/cart/items",{method:"POST",body:{productId:e,quantity:t}}),removeFromCart:e=>s(`/cart/items/${e}`,{method:"DELETE"}),checkout:e=>s("/checkout",{method:"POST",body:e}),getOrders:()=>s("/orders"),getOrder:e=>s(`/orders/${e}`)},"userAPI",0,{register:(e,t,r)=>s("/users/register",{method:"POST",body:{email:e,password:t,name:r}}),login:(e,t)=>s("/users/login",{method:"POST",body:{email:e,password:t}}),getProfile:()=>s("/users/me"),updateProfile:e=>s("/users/me",{method:"PUT",body:e})}],51086)},19016,e=>{"use strict";var t=e.i(32961),s=e.i(17162),r=e.i(33398),a=e.i(9089),l=e.i(51086),i=e.i(46313);function n(){let e=(0,r.useRouter)(),[n,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(!0),[h,x]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{if(!i.auth.isAuthenticated())return e.push("/auth/login");try{let e=i.auth.getToken(),t=await l.orderAPI.getOrders(e||"");o(t.data||t)}catch(e){console.error("Failed to fetch orders:",e)}finally{c(!1)}})()},[e]),d)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading orders..."})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-serif font-bold mb-8",children:"Order History"}),0===n.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"You haven't placed any orders yet"}),(0,t.jsx)(a.default,{href:"/products",className:"inline-block bg-pink-600 text-white px-6 py-3 rounded hover:bg-pink-700 transition",children:"Start Shopping"})]}):(0,t.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsxs)("button",{onClick:()=>x(h===e.id?null:e.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition",children:[(0,t.jsxs)("div",{className:"text-left flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg",children:["Order #",e.id]}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${(e=>{switch(e.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,t.jsx)("span",{className:`text-sm font-semibold ${(e=>{switch(e.toLowerCase()){case"paid":return"text-green-600";case"pending":return"text-yellow-600";case"failed":return"text-red-600";default:return"text-gray-600"}})(e.payment_status)}`,children:e.payment_status.charAt(0).toUpperCase()+e.payment_status.slice(1)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Date"}),(0,t.jsx)("p",{children:new Date(e.created_at).toLocaleDateString()})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Total"}),(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["Rs."," ",parseFloat(String(e.total_amount)).toLocaleString()]})]})]})]}),(0,t.jsx)("div",{className:"text-2xl text-gray-400",children:h===e.id?"▼":"▶"})]}),h===e.id&&(0,t.jsxs)("div",{className:"border-t px-6 py-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-3",children:"Items"}),(0,t.jsx)("div",{className:"space-y-2",children:e.items.map(e=>(0,t.jsxs)("div",{className:"flex justify-between text-sm py-2 border-b border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.product_name}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Qty: ",e.quantity]})]}),(0,t.jsxs)("p",{className:"font-semibold",children:["Rs."," ",(parseFloat(String(e.price))*e.quantity).toLocaleString()]})]},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Shipping Address"}),(0,t.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.shipping_address})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,t.jsxs)("span",{children:["Rs."," ",parseFloat(String(e.total_amount)).toLocaleString()]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,t.jsx)("span",{children:"Free"})]}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold text-lg border-t pt-2",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["Rs."," ",parseFloat(String(e.total_amount)).toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(a.default,{href:"/products",className:"flex-1 text-center bg-pink-600 text-white py-2 rounded hover:bg-pink-700 transition",children:"Continue Shopping"}),"pending"===e.status.toLowerCase()&&(0,t.jsx)("button",{className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded hover:bg-gray-300 transition",children:"Cancel Order"})]})]})]},e.id))})]})})}e.s(["default",()=>n])}]);