(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33398,(e,t,s)=>{t.exports=e.r(8991)},51086,46313,e=>{"use strict";e.i(74374);let t={getUser:()=>{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("user");if(e&&t)try{return JSON.parse(t)}catch{}return null},setUser:e=>{localStorage.setItem("user",JSON.stringify(e)),e.token&&localStorage.setItem("auth_token",e.token)},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("auth_token")},isAuthenticated:()=>!!localStorage.getItem("auth_token"),getToken:()=>localStorage.getItem("auth_token")};async function s(e,a={}){let r=`http://localhost:8001${e}`,l=a.method||"GET",o={"Content-Type":"application/json",...a.headers},n=t.getToken();n&&(o.Authorization=`Bearer ${n}`);let i=await fetch(r,{method:l,headers:o,body:a.body?JSON.stringify(a.body):void 0});if(!i.ok){if(401===i.status)throw t.logout(),Error("Unauthorized");throw Error(`API error: ${i.statusText}`)}return i.json()}e.s(["auth",0,t],46313),e.s(["orderAPI",0,{getCart:()=>s("/cart"),addToCart:(e,t)=>s("/cart/items",{method:"POST",body:{productId:e,quantity:t}}),removeFromCart:e=>s(`/cart/items/${e}`,{method:"DELETE"}),checkout:e=>s("/checkout",{method:"POST",body:e}),getOrders:()=>s("/orders"),getOrder:e=>s(`/orders/${e}`)},"userAPI",0,{register:(e,t,a)=>s("/users/register",{method:"POST",body:{email:e,password:t,name:a}}),login:(e,t)=>s("/users/login",{method:"POST",body:{email:e,password:t}}),getProfile:()=>s("/users/me"),updateProfile:e=>s("/users/me",{method:"PUT",body:e})}],51086)},24443,e=>{"use strict";var t=e.i(32961),s=e.i(17162),a=e.i(33398),r=e.i(51086),l=e.i(46313);function o(){let e=(0,a.useRouter)(),[o,n]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0),[c,m]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),[h,x]=(0,s.useState)(""),[b,p]=(0,s.useState)({full_name:"",phone:"",address:""});(0,s.useEffect)(()=>{(async()=>{if(!l.auth.isAuthenticated())return e.push("/auth/login");try{let e=l.auth.getToken(),t=(await r.userAPI.getProfile(e||"")).data;n(t),p({full_name:t.full_name||"",phone:t.phone||"",address:t.address||""})}catch(e){console.error("Failed to fetch profile:",e)}finally{d(!1)}})()},[e]);let y=async e=>{e.preventDefault(),g(!0),x("");try{let e=l.auth.getToken(),t=(await r.userAPI.updateProfile(e||"",b)).data;n(t),l.auth.setUser(t),m(!1),x("✓ Profile updated successfully"),setTimeout(()=>x(""),3e3)}catch(e){x("✗ Failed to update profile")}finally{g(!1)}};return i?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading profile..."})}):o?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-serif font-bold mb-8",children:"My Profile"}),h&&(0,t.jsx)("div",{className:`mb-6 p-4 rounded ${h.startsWith("✓")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:h}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md p-8",children:c?(0,t.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Email (Read-only)"}),(0,t.jsx)("input",{type:"email",value:o.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded bg-gray-50 text-gray-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Full Name"}),(0,t.jsx)("input",{type:"text",value:b.full_name,onChange:e=>p({...b,full_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-600",placeholder:"Enter your full name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Phone"}),(0,t.jsx)("input",{type:"tel",value:b.phone,onChange:e=>p({...b,phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-600",placeholder:"Enter your phone number"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Address"}),(0,t.jsx)("textarea",{value:b.address,onChange:e=>p({...b,address:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-600",placeholder:"Enter your address"})]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,t.jsx)("button",{type:"submit",disabled:u,className:"flex-1 bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 disabled:bg-gray-300 transition",children:u?"Saving...":"Save Changes"}),(0,t.jsx)("button",{type:"button",onClick:()=>m(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-400 transition",children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Email"}),(0,t.jsx)("p",{className:"text-lg text-gray-900 bg-gray-50 p-3 rounded",children:o.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Full Name"}),(0,t.jsx)("p",{className:"text-lg text-gray-900",children:o.full_name||"Not provided"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Phone"}),(0,t.jsx)("p",{className:"text-lg text-gray-900",children:o.phone||"Not provided"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Address"}),(0,t.jsx)("p",{className:"text-lg text-gray-900 whitespace-pre-wrap",children:o.address||"Not provided"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Member Since"}),(0,t.jsx)("p",{className:"text-lg text-gray-900",children:new Date(o.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Account Status"}),(0,t.jsx)("p",{className:"text-lg text-gray-900",children:o.is_active?(0,t.jsx)("span",{className:"text-green-600 font-semibold",children:"✓ Active"}):(0,t.jsx)("span",{className:"text-red-600 font-semibold",children:"✗ Inactive"})})]}),(0,t.jsx)("button",{onClick:()=>m(!0),className:"w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 transition mt-8",children:"Edit Profile"})]})})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Failed to load profile"})})}e.s(["default",()=>o])}]);