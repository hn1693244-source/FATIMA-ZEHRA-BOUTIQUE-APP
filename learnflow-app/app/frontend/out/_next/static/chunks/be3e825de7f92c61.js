(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33398,(e,t,r)=>{t.exports=e.r(8991)},51086,46313,e=>{"use strict";e.i(74374);let t={getUser:()=>{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("user");if(e&&t)try{return JSON.parse(t)}catch{}return null},setUser:e=>{localStorage.setItem("user",JSON.stringify(e)),e.token&&localStorage.setItem("auth_token",e.token)},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("auth_token")},isAuthenticated:()=>!!localStorage.getItem("auth_token"),getToken:()=>localStorage.getItem("auth_token")};async function r(e,n={}){let s=`http://localhost:8001${e}`,i=n.method||"GET",a={"Content-Type":"application/json",...n.headers},o=t.getToken();o&&(a.Authorization=`Bearer ${o}`);let l=await fetch(s,{method:i,headers:a,body:n.body?JSON.stringify(n.body):void 0});if(!l.ok){if(401===l.status)throw t.logout(),Error("Unauthorized");throw Error(`API error: ${l.statusText}`)}return l.json()}e.s(["auth",0,t],46313),e.s(["orderAPI",0,{getCart:()=>r("/cart"),addToCart:(e,t)=>r("/cart/items",{method:"POST",body:{productId:e,quantity:t}}),removeFromCart:e=>r(`/cart/items/${e}`,{method:"DELETE"}),checkout:e=>r("/checkout",{method:"POST",body:e}),getOrders:()=>r("/orders"),getOrder:e=>r(`/orders/${e}`)},"userAPI",0,{register:(e,t,n)=>r("/users/register",{method:"POST",body:{email:e,password:t,name:n}}),login:(e,t)=>r("/users/login",{method:"POST",body:{email:e,password:t}}),getProfile:()=>r("/users/me"),updateProfile:e=>r("/users/me",{method:"PUT",body:e})}],51086)},39332,(e,t,r)=>{"use strict";var n=e.r(17162),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,a=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var u="u"<typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=i({inst:{value:r,getSnapshot:t}}),s=n[0].inst,u=n[1];return o(function(){s.value=r,s.getSnapshot=t,d(s)&&u({inst:s})},[e,r,t]),a(function(){return d(s)&&u({inst:s}),e(function(){d(s)&&u({inst:s})})},[e]),l(r),r};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},19338,(e,t,r)=>{"use strict";t.exports=e.r(39332)},39348,(e,t,r)=>{"use strict";var n=e.r(17162),s=e.r(19338),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useSyncExternalStore,o=n.useRef,l=n.useEffect,d=n.useMemo,u=n.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var c=o(null);if(null===c.current){var h={hasValue:!1,value:null};c.current=h}else h=c.current;var m=a(e,(c=d(function(){function e(e){if(!l){if(l=!0,a=e,e=n(e),void 0!==s&&h.hasValue){var t=h.value;if(s(t,e))return o=t}return o=e}if(t=o,i(a,e))return t;var r=n(e);return void 0!==s&&s(t,r)?(a=e,t):(a=e,o=r)}var a,o,l=!1,d=void 0===r?null:r;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,r,n,s]))[0],c[1]);return l(function(){h.hasValue=!0,h.value=m},[m]),u(m),m}},92710,(e,t,r)=>{"use strict";t.exports=e.r(39348)},87819,e=>{"use strict";var t=e.i(32961),r=e.i(17162),n=e.i(9089),s=e.i(33398);let i={get url(){return`file://${e.P("app/frontend/node_modules/zustand/esm/vanilla.mjs")}`}},a=e=>{let t,r=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{(i.env?i.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},o=t=e(n,s,a);return a};var o=e.i(92710);let l={get url(){return`file://${e.P("app/frontend/node_modules/zustand/esm/index.mjs")}`}},{useDebugValue:d}=r.default,{useSyncExternalStoreWithSelector:u}=o.default,c=!1,h={get url(){return`file://${e.P("app/frontend/node_modules/zustand/esm/middleware.mjs")}`}},m=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>m(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>m(t)(e)}}},g=(e=>{(l.env?l.env.MODE:void 0)!=="production"&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?e?a(e):a:e,r=(e,r)=>(function(e,t=e=>e,r){(l.env?l.env.MODE:void 0)!=="production"&&r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let n=u(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return d(n),n})(t,e,r);return Object.assign(r,t),r})(((e,t)=>{if("getStorage"in t||"serialize"in t||"deserialize"in t)return(h.env?h.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),(r,n,s)=>{let i,a,o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1,d=new Set,u=new Set;try{i=o.getStorage()}catch(e){}if(!i)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...e)},n,s);let c=m(o.serialize),h=()=>{let e,t=c({state:o.partialize({...n()}),version:o.version}).then(e=>i.setItem(o.name,e)).catch(t=>{e=t});if(e)throw e;return t},g=s.setState;s.setState=(e,t)=>{g(e,t),h()};let f=e((...e)=>{r(...e),h()},n,s),p=()=>{var e;if(!i)return;l=!1,d.forEach(e=>e(n()));let t=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,n()))||void 0;return m(i.getItem.bind(i))(o.name).then(e=>{if(e)return o.deserialize(e)}).then(e=>{if(e)if("number"!=typeof e.version||e.version===o.version)return e.state;else{if(o.migrate)return o.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return r(a=o.merge(e,null!=(t=n())?t:f),!0),h()}).then(()=>{null==t||t(a,void 0),l=!0,u.forEach(e=>e(a))}).catch(e=>{null==t||t(void 0,e)})};return s.persist={setOptions:e=>{o={...o,...e},e.getStorage&&(i=e.getStorage())},clearStorage:()=>{null==i||i.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>l,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},p(),a||f};return(r,n,s)=>{let i,a={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=r.getItem(e))?t:null;return s instanceof Promise?s.then(n):n(s)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,l=new Set,d=new Set,u=a.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...e)},n,s);let c=()=>{let e=a.partialize({...n()});return u.setItem(a.name,{state:e,version:a.version})},h=s.setState;s.setState=(e,t)=>{h(e,t),c()};let g=e((...e)=>{r(...e),c()},n,s);s.getInitialState=()=>g;let f=()=>{var e,t;if(!u)return;o=!1,l.forEach(e=>{var t;return e(null!=(t=n())?t:g)});let s=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=n())?e:g))||void 0;return m(u.getItem.bind(u))(a.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];else{if(a.migrate)return[!0,a.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[s,o]=e;if(r(i=a.merge(o,null!=(t=n())?t:g),!0),s)return c()}).then(()=>{null==s||s(i,void 0),i=n(),o=!0,d.forEach(e=>e(i))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{a={...a,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},a.skipHydration||f(),i||g}})((e,t)=>({items:[],addItem:t=>e(e=>e.items.find(e=>e.id===t.id)?{items:e.items.map(e=>e.id===t.id?{...e,quantity:e.quantity+t.quantity}:e)}:{items:[...e.items,t]}),removeItem:t=>e(e=>({items:e.items.filter(e=>e.id!==t)})),updateQuantity:(t,r)=>e(e=>({items:e.items.map(e=>e.id===t?{...e,quantity:r}:e)})),clearCart:()=>e({items:[]}),total:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0)}),{name:"cart-store"}));var f=e.i(51086),p=e.i(46313);function v(){let e=(0,s.useRouter)(),{items:i,setCart:a,removeItem:o,clear:l}=g(),[d,u]=(0,r.useState)(!0),[c,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(!p.auth.isAuthenticated())return e.push("/auth/login");try{let e=await f.orderAPI.getCart();a(e.data.items||e.data)}catch(e){console.error("Failed to fetch cart:",e)}finally{u(!1)}})()},[]);let m=i.reduce((e,t)=>e+parseFloat(String(t.price))*t.quantity,0),v=async()=>{h(!0);try{let t=await f.orderAPI.checkout("123 Main Street, City, Country");l(),e.push(`/orders/${t.data.id}`)}catch(e){console.error("Checkout failed:",e),alert("Checkout failed. Please try again.")}finally{h(!1)}};return d?(0,t.jsx)("div",{className:"text-center py-12",children:"Loading cart..."}):0===i.length?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-serif font-bold mb-8",children:"Shopping Cart"}),(0,t.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Your cart is empty"}),(0,t.jsx)(n.default,{href:"/products",className:"inline-block bg-pink-600 text-white px-6 py-3 rounded hover:bg-pink-700 transition",children:"Continue Shopping"})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-serif font-bold mb-8",children:"Shopping Cart"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-semibold",children:"Product"}),(0,t.jsx)("th",{className:"px-6 py-4 text-center font-semibold",children:"Quantity"}),(0,t.jsx)("th",{className:"px-6 py-4 text-right font-semibold",children:"Price"}),(0,t.jsx)("th",{className:"px-6 py-4 text-right font-semibold",children:"Total"}),(0,t.jsx)("th",{className:"px-6 py-4"})]})}),(0,t.jsx)("tbody",{children:i.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:e.product_name}),(0,t.jsx)("td",{className:"px-6 py-4 text-center",children:e.quantity}),(0,t.jsxs)("td",{className:"px-6 py-4 text-right",children:["Rs. ",parseFloat(String(e.price)).toFixed(0)]}),(0,t.jsxs)("td",{className:"px-6 py-4 text-right font-semibold",children:["Rs. ",(parseFloat(String(e.price))*e.quantity).toFixed(0)]}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)("button",{onClick:()=>o(e.product_id),className:"text-red-600 hover:text-red-700 font-semibold",children:"Remove"})})]},e.product_id))})]})})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-xl font-serif font-bold mb-6",children:"Order Summary"}),(0,t.jsxs)("div",{className:"space-y-4 mb-6 pb-6 border-b",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["Rs. ",m.toFixed(0)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Shipping"}),(0,t.jsx)("span",{children:"Free"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Tax"}),(0,t.jsx)("span",{children:"Rs. 0"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xl font-bold mb-6",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["Rs. ",m.toFixed(0)]})]}),(0,t.jsx)("button",{onClick:v,disabled:c,className:"w-full bg-pink-600 text-white py-3 rounded font-semibold hover:bg-pink-700 disabled:bg-gray-300 transition",children:c?"Processing...":"Proceed to Checkout"}),(0,t.jsx)(n.default,{href:"/products",className:"block text-center mt-4 text-pink-600 hover:text-pink-700 font-semibold",children:"Continue Shopping"})]})})]})]})})}e.s(["default",()=>v],87819)}]);